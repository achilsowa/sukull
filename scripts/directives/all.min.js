sukuApp.directive("authModal",[function(){return{templateUrl:"views/auth-modal.html",restrict:"AE",link:function(c,b,a){c.strs={"Your are not authenticated or your session has ended":"Your are not authenticated or your session has ended","Please sign in again":"Please sign in again",Close:"Close","Sign in":"Sign in"}}}}]);sukuApp.directive("chartView",["ChartViewService",function(a){return{templateUrl:"views/chart-view.html",restrict:"AE",scope:{meta:"="},require:"?^excelView",link:function(d,c,b,e){d.strs={"Chart Editor":"Chart Editor","Data range":"Data range","Graphic type":"Graphic type",Column:"Column",Line:"Line","Polar-Area":"Polar-Area",Radar:"Radar","Pie, Doughnut":"Pie, Doughnut","Data series in rows":"Data series in rows","Data series in columns":"Data series in columns"};var f;if(e){f=new a({view:e.view,el:c})}else{f=new a({meta:d.meta,el:c})}console.log(e.state)}}}]);sukuApp.directive("classroomPropertiesModal",[function(){return{templateUrl:"views/classroom-properties-modal.html",restrict:"AE",link:function(d,c,b){d.strs={Properties:"Properties",Effectif:"Effectif",Male:"Male",Female:"Female",Attachments:"Attachments","Attach a file":"Attach a file",Activity:"Activity",comment:"comment",Comment:"Comment",Download:"Download"};d.submit=function(){d.publish({comment:d.comment});d.comment=null};var a=angular.element('form[name="fileForm"] input[type="file"]');a.bind("change",function(){console.log(a.val());if(!a.get(0).files[0]){return}d.addfile({file:a.get(0).files[0]})});d.submitFile=function(){a.trigger("click")}},scope:{files:"=",comments:"=",olds:"=",files:"=",properties:"=",working:"=",error:"=",publish:"&",addfile:"&"}}}]);sukuApp.directive("datepicker",[function(){return{restrict:"A",require:"?ngModel",link:function(b,a,e,d){var c={todayBtn:"linked",keyboardNavigation:false,forceParse:false,calendarWeeks:true,autoclose:true};a.datepicker(c);d.$render=function(){a.val(d.$viewValue)};a.on("set",function(f){b.$apply(function(){d.$setViewValue(a.val())})})}}}]);sukuApp.directive("excelColumn",["Column",function(a){return{restrict:"A",required:"^excelView",scope:{header:"=",formula:"=",items:"="},link:function(d,c,f,b){d.header.index=d.header.index||d.header.name;var e=new a({name:d.header.name,index:d.header.index,items:d.items,formula:d.formula,view:b})}}}]);sukuApp.directive("excelView",["ExcelViewService","ExcelColumnViewService",function(b,a){return{templateUrl:"views/excel-view.html",restrict:"AE",scope:{headers:"=",viewId:"@",model:"="},controller:function(e,d,c){e.strs={Undo:"Undo",Redo:"Redo",Cut:"Cut",Copy:"Copy",Paste:"Paste","Remove row":"Remove row","Remove column":"Remove column",Insert:"Insert",Edit:"Editx","Insert graphic":"Insert graphic","Insert row":"Insert row","Insert column":"Insert column"};d.attr("id",e.viewId);this.view=new b({el:d,headers:e.headers});this.state=e.state=this.view.state;console.log(this.state);console.log("END");this.view.setModel(e.model)}}}]);sukuApp.directive("fileInput",["ServerFileModel",function(a){return{restrict:"AE",templateUrl:"views/file-input.html",scope:{paths:"="},link:function(c,b,e){c.strs={"Upload the text file":"Upload the text file"};c.loading=false;c.error=null;var d=function(l,g){if(!g){g=0}var j=$('<input class="form-control file-hide"  name="file-'+g+'" type="hidden" />');var k=$('<i class="item-preview fa fa-file" style="font-size:43px;"></i>');j.val(l);var h=$('<span class="item-preview"/>');h.append(j).append(k);h.append('<i class="closes fa fa-remove"/>');h.find("i.closes").bind("click",function(i){var m=$(i.currentTarget);m.parent().remove();console.log(c.paths);c.paths.splice(g,1);console.log(c.paths)});return h};var f=function(){var g=b.find('input[type="file"]');var i=b.find(".add-file");i.find('[what="upload-file"]').bind("click",function(j){j.preventDefault();console.log(g);g.trigger("click")});var h=this;g.bind("change",function(){console.log(g.val());c.loading=true;console.log(c.loading);if(!g.get(0).files[0]){c.loading=false;return}var j=new a({file:g.get(0).files[0],type:2});j.psave();var k=d(null,j.id);i.parent().append(k);j.save().then(function(l){console.log("path---->"+l);c.loading=false;console.log(c.loading);if(l=="0"){c.error="Error while saving the file. Check that the extension and the size are correct ";k.remove();return}k.find(".file-hide").val(l);c.paths.push(l);c.error=null},function(l){c.loading=false;c.error=l.msg})})};f()}}}]);sukuApp.directive("fixedHeight",[function(){return{restrict:"A",link:function(b,a,c){var d=function(){var e=$(window).height();var f=a.offset().top;a.height(e-f-50)};d();$(window).bind("resize",d);a.on("$destroy",function(){$(window).unbind("resize",d)})}}}]);sukuApp.directive("gridView",["Helper",function(a){return{templateUrl:"views/grid-view.html",restrict:"A",link:function(d,c,b){d.strs={Open:"Open",Edit:"Edit",Delete:"Delete"};for(var e=0;e<d.headers.length;++e){if(!d.headers[e].name){throw ("name is required for each header")}d.headers[e].index=d.headers[e].index||d.headers[e].name}d.click_hdl=function(f){f.selected=!f.selected};d.open_hdl=function(f){d.open({item:f})};d.edit_hdl=function(f){d.edit({item:f})};d.remove_hdl=function(f){d.remove({item:f})};d.present=a.truncate},scope:{icon:"=",headers:"=",items:"=",open:"&",edit:"&",remove:"&"}}}]);sukuApp.directive("importStudentsModal",[function(){return{templateUrl:"views/import-students-modal.html",restrict:"AE",link:function(c,b,a){c.strs={"If your student file is not a text file (pdf, excel, word, ...)":"If your student file is not a text file (pdf, excel, word, ...)","open your text editor (notepad, bloc note, emacs ...)":"open your text editor (notepad, bloc note, emacs ...)","copy the students' names in that file, each name on it's own line and save the file with the extension .txt or .text":"copy the students' names in that file, each name on it's own line and save the file with the extension .txt or .text","Then import it via this assistant":"Then import it via this assistant","The other students' information (email, phone ...) must be filled later":"The other students' information (email, phone ...) must be filled later","The imported students will be added to students already present in the classroom before":"The imported students will be added to students already present in the classroom before",Close:"Close",Send:"Send"};c.submit=function(){c.imports()}},scope:{working:"=",loading:"=",paths:"=",error:"=",imports:"&"}}}]);sukuApp.directive("inviteUserModal",[function(){return{templateUrl:"views/invite-user-modal.html",restrict:"AE",link:function(c,b,a){c.strs={Email:"Email","Enter your colleague's email":"Enter your colleague's email","You may want to share some of your classroom with him":"You may want to share some of your classroom with him",Close:"Close",Invite:"Invite"};c.submit=function(){console.log(c.email);c.invite({email:c.email})}},scope:{classrooms:"=",working:"=",error:"=",invite:"&"}}}]);sukuApp.directive("notificationModal",["$location",function(a){return{templateUrl:"views/notification-modal.html",restrict:"AE",link:function(d,c,b){d.$watch("notifications.length",function(){if(d.notifications.length==0){return}if(!d.newno){d.newno=!d.newno}});d.open=function(e){if(e.link){c.modal("hide");a.path(e.link)}};d.strs={"Five things you may have missed":"Five things you may have missed"}},scope:{notifications:"=",newno:"=",olds:"="}}}]);sukuApp.directive("profileModal",[function(){return{templateUrl:"views/profile-modal.html",restrict:"AE",link:function(d,c,b){d.strs={username:"username",Edit:"Edit","Edit picture":"Edit picture","Edit password":"Edit password","Member since":"Member since","Teacher at":"Teacher at","old password":"old password","new password":"new password","new password again":"new password again",Close:"Close",Save:"Save","Edit or Profile":"Change password"};d.more=false;d.toggleEdit=function(){d.more=!d.more;d.strs["Edit or Profile"]=(d.more?"Profile":"Change password")};d.submit=function(){d.editpwd({old:d.oldpwd,new1:d.newpwd,new2:d.newpwd2});d.oldpwd=d.newpwd=d.newpwd2=""};var a=angular.element('form[name="tofForm"] input[type="file"]');a.bind("change",function(){console.log(a.val());if(!a.get(0).files[0]){return}d.edittof({file:a.get(0).files[0],type:1})});d.submitTof=function(){a.trigger("click")}},scope:{user:"=",working:"=",error:"=",editpwd:"&",edittof:"&"}}}]);sukuApp.directive("saveClassroomModal",[function(){return{templateUrl:"views/save-classroom-modal.html",restrict:"AE",link:function(c,b,a){c.strs={Name:"Name",School:"School","classroom name":"classroom name","school name":"school name",Close:"Close",Save:"Save"};c.submit=function(){c.save()}},scope:{classroom:"=",working:"=",error:"=",save:"&"}}}]);sukuApp.directive("saveStudentModal",[function(){return{templateUrl:"views/save-student-modal.html",restrict:"AE",link:function(c,b,a){c.submit=function(){c.save()}},scope:{student:"=",working:"=",error:"=",save:"&"}}}]);sukuApp.directive("saveTestModal",[function(){return{templateUrl:"views/save-test-modal.html",restrict:"AE",link:function(c,b,a){c.submit=function(){c.save()}},scope:{test:"=",working:"=",error:"=",save:"&"}}}]);sukuApp.directive("shareEltModal",[function(){return{templateUrl:"views/share-elt-modal.html",restrict:"AE",link:function(c,b,a){c.submit=function(){console.log(c.email);c.share({email:c.email})}},scope:{elt:"=",working:"=",error:"=",share:"&"}}}]);sukuApp.directive("tableView",[function(){return{templateUrl:"views/table-view.html",restrict:"AE",link:function(c,b,a){c.strs={Open:"Open",Edit:"Edit",Delete:"Delete"};for(var d=0;d<c.headers.length;++d){if(!c.headers[d].name){throw ("name is required for each header")}c.headers[d].index=c.headers[d].index||c.headers[d].name}c.click_hdl=function(e){e.selected=!e.selected};c.deselect=function(){for(var e=0;e<c.items.length;++e){c.items[e].selected=false;var f=c.items[e]}};c.open_hdl=function(e){console.log(e);c.open({item:e})};c.edit_hdl=function(e){c.edit({item:e})};c.remove_hdl=function(e){c.remove({item:e})};b.bind("click",function(e){if(e.target.tagName=="TBODY"){c.deselect()}})},scope:{icon:"=",headers:"=",items:"=",edit:"&",open:"&",remove:"&"}}}]);sukuApp.directive("testPropertiesModal",[function(){return{templateUrl:"views/test-properties-modal.html",restrict:"AE",link:function(d,c,b){d.strs={Properties:"Properties",Effectif:"Effectif",Male:"Male",Female:"Female",Attachments:"Attachments","Attach a file":"Attach a file",Activity:"Activity",comment:"comment",Comment:"Comment",Download:"Download"};d.submit=function(){d.publish({comment:d.comment});d.comment=null};var a=angular.element('form[name="fileForm"] input[type="file"]');a.bind("change",function(){console.log(a.val());if(!a.get(0).files[0]){return}d.addfile({file:a.get(0).files[0]})});d.submitFile=function(){a.trigger("click")}},scope:{files:"=",comments:"=",olds:"=",files:"=",properties:"=",working:"=",error:"=",publish:"&",addfile:"&"}}}]);